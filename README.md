API
---

Prostiezvonki
=============

### Конифгураця

При подключении скрипта создаётся глобальная переменная `prostiezvonki`. Для удобства к ней можно обращаться через псевдоним `pz`.

Для начала работы следует задать внутренний номер сотрудника:

```js
pz.setUserPhone(
    phone // внутренний номер телефона сотрудника
);
```

### Подключение к серверу

```js
pz.connect({
    host: 'ws://localhost:10150', // Адрес сервера
    client_id: 'password',        // Пароль
    client_type: 'tinycrm'        // Тип приложения
});
```

### Разрыв подключения

```js
pz.disconnect();
```

### Исходящий звонок

```js
pz.call(
    phone // номер телефона, на который будет совершён звонок
);
```

### Перевод звонка

```js
pz.transfer(
    call_id, // идентификатор звонка, полученный от сервера
    phone    // номер телефона, на который нужно перевести звонок
);
```

### Получение событий

```js
pz.onEvent(
    callback // функция, которая будет вызвана при получении события от сервера
);
```

Event
=====

event.type - тип события.

* 1 - входящий вызов на переадресацию
* 2 - входящий вызов на менеджера
* 3 - завершенный вызов

Подробнее про события можно прочитать [тут](https://github.com/vedisoft/php-sdk#--3).
